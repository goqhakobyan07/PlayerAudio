let music = [
    {
      artist: "Guf",
      song: "Ice Baby",
      mp3: "audio/ice-baby.mp3",
      picture: "img/guf.jpg",
      category: "Rap",
    },
    {
      artist: "Guf",
      song: "Новенький",
      mp3: "audio/guf-novenki.mp3",
      picture: "img/guf2.jpg",
      category: "Rap",
    },
    {
      artist: "Andy Panda",
      song: "Rude Mantras",
      mp3: "audio/andy-rude.mp3",
      picture: "img/andy.png",
      category: "Rap",
    },
    {
      artist: "Andy Panda, Miyagi",
      song: "Endorphin",
      mp3: "audio/endorphin.mp3",
      picture: "img/endorphin.jpg",
      category: "Rap",
    },
    {
      artist: "Miyagi",
      song: "Captain",
      mp3: "audio/captain.mp3",
      picture: "img/miyagi.webp",
      category: "Rap",
    },
    {
      artist: "Misho",
      song: "Tsar",
      mp3: "audio/misho.mp3",
      picture: "img/misho.webp",
      category: "Rap",
    },
    {
      artist: "Skriptonit",
      song: "Чистый",
      mp3: "audio/skrip.mp3",
      picture: "img/skrip.jpg",
      category: "Rap",
    },
    {
      artist: "Janaga",
      song: "Моя Муза",
      mp3: "audio/janaga.mp3",
      picture: "img/janaga.jpg",
      category: "Hip-Hop",
    },
    {
      artist: "Jah Khalib",
      song: "Аромат Твоих Волос",
      mp3: "audio/jah.mp3",
      picture: "img/jah.png",
      category: "Rap",
    },
    {
      artist: "Jah Khalib",
      song: "Дочка",
      mp3: "audio/dochka.mp3",
      picture: "img/jah-docha.jpg",
      category: "Rap",
    },
    {
      artist: "Mr Lambo",
      song: "Mango",
      mp3: "audio/mango.mp3",
      picture: "img/lambo.webp",
      category: "Rap",
    },
    {
      artist: "Fir",
      song: " Ночь",
      mp3: "audio/noch.mp3",
      picture: "img/fir.webp",
      category: "Rap",
    },
    {
      artist: "Xcho",
      song: "Эскизы",
      mp3: "audio/eskizi.mp3",
      picture: "img/xcho.webp",
      category: "Rap",
    },
    {
      artist: "Hovo",
      song: "Qaminer",
      mp3: "audio/qaminer.mp3",
      picture: "img/hovo.webp",
      category: "Armenian",
    },
    {
      artist: "Shami",
      song: "Фея",
      mp3: "audio/feya.mp3",
      picture: "img/shami.webp",
      category: "Rap",
    },
    {
      artist: "3.33",
      song: "3000",
      mp3: "audio/3000.mp3",
      picture: "img/3.33.jpg",
      category: "Rap",
    },
    {
      artist: "Tove Lo",
      song: "Habits",
      mp3: "audio/habits.mp3",
      picture: "img/tove-lo.webp",
      category: "Pop",
    },
    {
      artist: "Miyagi, Andy Panda",
      song: "Yamakasi",
      mp3: "audio/yamakasi.mp3",
      picture: "img/miyagi-andy.webp",
      category: "Rap",
    },
    {
      artist: "Gio Pika",
      song: " Листопадом",
      mp3: "audio/gio.mp3",
      picture: "img/pika.webp",
      category: "Rap",
    },
    {
      artist: "Xcho",
      song: "Ты и Я",
      mp3: "audio/ti-i-ya.mp3",
      picture: "img/xcho2.jpg",
      category: "Rap",
    },
    {
      artist: "3.33",
      song: "Kakach",
      mp3: "audio/3.33.mp3",
      picture: "img/3.333.jpg",
      category: "Hip-Hop",
    },
    {
      artist: "Ace of bace",
      song: "Beautiful live",
      mp3: "audio/ace of base.mp3",
      picture: "img/aceofbase.jpg",
      category: "Hip-Hop",
    },
    {
      artist: "Anna Asti",
      song: "Veryu v tebe",
      mp3: "audio/anna asti.mp3",
      picture: "img/anna.jpg",
      category: "Rap",
    },
    {
      artist: "Haddaway",
      song: "What is love",
      mp3: "audio/haddaway.mp3",
      picture: "img/haddaway.jpg",
      category: "Hip-Hop",
    },
    {
      artist: "Lana del Rey",
      song: "Summertime Sudness",
      mp3: "audio/lana del.mp3",
      picture: "img/lana.jpg",
      category: "Hip-Hop",
    },
    {
      artist: "Sevak Kganagyan",
      song: "Siyay",
      mp3: "audio/sevak.mp3",
      picture: "img/sevak.jpg",
      category: "Hip-Hop",
    },
    {
      artist: "Sia",
      song: "Unstopable",
      mp3: "audio/sia.mp3",
      picture: "img/sia.jpg",
      category: "Hip-Hop",
    },
    {
      artist: "Մի Քանի Հոգի",
      song: "էս պահին",
      mp3: "audio/Mi Qani Hogi - Es pahin.mp3",
      picture: "img/miqani.jpg",
      category: "Rap",
    },
    {
      artist: "3.33",
      song: "3000",
      mp3: "audio/3.33 - 3000 (www.mp3erger.ru) 2022.mp3",
      picture: "img/3000.jpg",
      category: "Rap",
    },
    {
      artist: "MONA, Баста",
      song: "Ты так мне необходим",
      mp3: "audio/MONA feat. Баста - Ты Так Мне Необходим.mp3",
      picture: "img/tak.jpg",
      category: "Pop",
    },
    {
      artist: "Jah Khalib",
      song: "На своём вайбе (feat. GUF)",
      mp3: "audio/Jah_Khalib_GUF_-_Na_svojom_vajjbe_(musmore.com).mp3",
      picture: "img/vibe.jpg",
      category: "Rap",
    },
    {
      artist: "Jah Khalib",
      song: "Искал-Нашёл",
      mp3: "audio/Jah Khalib - Искал-Нашёл.mp3",
      picture: "img/iskal.jpg",
      category: "Pop",
    },
    {
      artist: "Jah Khalib",
      song: " Песня о тебе",
      mp3: "audio/jah-khalib_-_pesnya-o-tebe.mp3",
      picture: "img/tebe.jpg",
      category: "Rap",
    },
    {
      artist: "Guf & Murovei",
      song: " Непогода",
      mp3: "audio/Guf_Murovei_Nepogoda.mp3",
      picture: "img/pogoda.jpg",
      category: "Rap",
    },
    {
      artist: "Miyagi & Эндшпиль",
      song: " Фея ",
      mp3: "audio/MiyaGi & Эндшпиль - Фея.mp3",
      picture: "img/feya.jpg",
      category: "Rap",
    },
    {
      artist: "HammAli & Navai",
      song: " Ты позвонишь ночью ",
      mp3: "audio/HammAli & Navai - Ты Позвонишь Ночью.mp3",
      picture: "img/noch.jpg",
      category: "Rap",
    },
    {
      artist: "Արկադի Դումիկյան",
      song: " Ավելի ",
      mp3: "audio/Arkadi Dumikyan - Aveli (www.mp3erger.ru) 2023.mp3",
      picture: "img/aveli.jpg",
      category: "Armenian",
    },
    {
      artist: "The Weeknd",
      song: " Call Out My Name ",
      mp3: "audio/The Weeknd - Call Out My Name (dizer.net).mp3",
      picture: "img/call.jpg",
      category: "R&B",
    },
    {
      artist: "50 Cent",
      song: " Best Friend  ",
      mp3: "audio/50 Cent - Best Friend (dizer.net).mp3",
      picture: "img/best.jpg",
      category: "Rap",
    },
    {
      artist: "Burak Yeter",
      song: " Tuesday   ",
      mp3: "audio/1573084963_burak_yeter_feat_danelle_sandoval__tuesday_.mp3",
      picture: "img/Tuesday.jpg",
      category: "Hip-Hop",
    },
    {
      artist: "Busta Rhymes & Mariah Carey",
      song: " I Know What You Want  ",
      mp3: "audio/Busta Rhymes - I Know What You Want.mp3",
      picture: "img/want.webp",
      category: "Hip-Hop",
    },
    {
      artist: "Outlandish",
      song: "  Callin U ",
      mp3: "audio/Outlandish_-_Callin_U_(musmore.com).mp3",
      picture: "img/callin.jpg",
      category: "Hip-Hop",
    },
    {
      artist: "Mahmut Orhan",
      song: " Feel feat. Sena Sener  ",
      mp3: "audio/Mahmut_Orhan_Sena_Sener_-_Feel_(musmore.com).mp3",
      picture: "img/feel.jpg",
      category: "Hip-Hop",
    },
    {
      artist: " Մի Քանի Հոգի",
      song: " Աղջիկ Չղջիկ  ",
      mp3: "audio/0a07fdb4cec8a9674a15b5ccd7506187_mi-qani-hogi-axjik-chxjik.mp3",
      picture: "img/axjik.jpg",
      category: "Hip-Hop",
    },
    {
      artist: " A Chilla ft DLitte",
      song: "  Kyanq u Togh  ",
      mp3: "audio/A Chilla ft. D  Litte - Kyanq u Togh (www.mp3erger.ru) 2021.mp3",
      picture: "img/kyanq.jpg",
      category: "Hip-Hop",
    },
    {
      artist: " Jah Khalib",
      song: "  911  ",
      mp3: "audio/jah-khalib_-_911.mp3",
      picture: "img/911.jpg",
      category: "Hip-Hop",
    },
    {
      artist: " Jah Khalib",
      song: " Доча  ",
      mp3: "audio/Jah Khalib - Доча.mp3",
      picture: "img/docha.jpg",
      category: "Pop",
    },
    {
      artist: "Timati",
      song: "Нельзя",
      mp3: "audio/timati.mp3",
      picture: "img/timati.jpg",
      category: "Rap",
    },
    {
      artist: "Egor Kreed",
      song: "Выпускной",
      mp3: "audio/egorkreed.mp3",
      picture: "img/egorkreed.jpg",
      category: "Rap",
    },
    {
      artist: "Macan",
      song: "ASPHALT 8",
      mp3: "audio/macan.mp3",
      picture: "img/macan.jpg",
      category: "Rap",
    },
    {
      artist: "Xcho",
      song: "Ты и я",
      mp3: "audio/xcho.mp3",
      picture: "img/xcho.jpg",
      category: "Rap",
    },
    {
      artist: "Aram Mp3",
      song: "Not Alone",
      mp3: "audio/arammp3.mp3",
      picture: "img/aram.jpg",
      category: "Jazz",
    },
    {
      artist: "Arame",
      song: "Chknagh Yeraz",
      mp3: "audio/arame.mp3",
      picture: "img/arame.jpg",
      category: "Armenian",
    },
    {
      artist: "Martin Mkrtchyan",
      song: "Gitem vor kas",
      mp3: "audio/martin.mp3",
      picture: "img/martin.jpg",
      category: "Armenian",
    },
    {
      artist: "Saro Tovmasyan",
      song: "Kyanq u kriv",
      mp3: "audio/saro.mp3",
      picture: "img/saro.jpg",
      category: "Armenian",
    },
    {
      artist: "Arkadi Dumikyan",
      song: "Давай веселей",
      mp3: "audio/arkadi.mp3",
      picture: "img/arkadi.jpg",
      category: "Jazz",
    },
    {
      artist: "Eminem",
      song: "Mockingbird",
      mp3: "audio/eminem.mp3",
      picture: "img/eminem.jpg",
      category: "Hip-Hop",
    },
    {
      artist: "Eminem",
      song: "Without Me",
      mp3: "audio/Without Me.mp3",
      picture: "img/with.jpg",
      category: "Rap",
    },
    {
      artist: "Eminem",
      song: "The Real Slim Shady",
      mp3: "audio/The Real Slim Shady.mp3",
      picture: "img/shady.jpg",
      category: "Rap",
    },
    {
      artist: "Eminem",
      song: "Mockingbird",
      mp3: "audio/Mockingbird.mp3",
      picture: "img/Mockingbird.jpg",
      category: "Rap",
    },
    {
      artist: "Eminem",
      song: "Not Afraid",
      mp3: "audio/Not Afraid.mp3",
      picture: "img/not.jpg",
      category: "Rap",
    },
    {
      artist: "Eminem",
      song: "Lose Yourself",
      mp3: "audio/Lose Yourself.mp3",
      picture: "img/lose.jpg",
      category: "Rap",
    },
    {
      artist: "Eminem",
      song: "Rap God",
      mp3: "audio/Rap God.mp3",
      picture: "img/god.jpg",
      category: "Rap",
    },
    {
      artist: "Eminem",
      song: "Godzilla",
      mp3: "audio/Godzilla.mp3",
      picture: "img/Godzilla.jpg",
      category: "Rap",
    },
    {
      artist: "Coolio",
      song: "Gangsta's Paradise",
      mp3: "audio/Gangsta's Paradise.mp3",
      picture: "img/gangsta.jpg",
      category: "Hip-Hop",
    },
    {
      artist: "50 Cent",
      song: "P I M P",
      mp3: "audio/P I M P.mp3",
      picture: "img/pimp.jpg",
      category: "Hip-Hop",
    },
    {
      artist: "Ice Cube",
      song: "It Was A Good Day",
      mp3: "audio/It Was A Good Day.mp3",
      picture: "img/good.jpg",
      category: "Hip-Hop",
    },
    {
      artist: "Snoop Dogg",
      song: "Drop It Like It's Hot",
      mp3: "audio/Drop It Like It's Hot.mp3",
      picture: "img/drop.jpg",
      category: "Hip-Hop",
    },
    {
      artist: "Dr. Dre",
      song: "The Next Episode",
      mp3: "audio/The Next Episode.mp3",
      picture: "img/thenextepisode.jpg",
      category: "Hip-Hop",
    },
  ];
const categoryList = [
    {
      pic : 'https://fikiwiki.com/uploads/posts/2022-02/1645059693_28-fikiwiki-com-p-kartinki-rep-30.jpg',
      content : 'Rap'
    },
    {
      pic : 'https://blog.siriusxm.com/wp-content/uploads/2018/03/llcoolj.jpg',
      content : 'Hip-Hop'
    },
    {
      pic : 'https://kartinkin.net/uploads/posts/2022-03/1648101876_52-kartinkin-net-p-pop-muzika-kartinki-55.jpg',
      content : 'Pop'
    },
    {
      pic : 'https://thisisrnb.com/wp-content/uploads/2013/11/The-Jackets-6.jpg',
      content : 'R&B'
    },
    {
      pic : 'https://kartinkin.net/uploads/posts/2021-03/1616111544_56-p-dzhaz-krasivie-foto-61.jpg',
      content : 'Jazz'
    },
    {
      pic : 'https://cdn61.zvuk.com/pic?type=artist&id=67838346&ext=jpg&size=1920x1920',
      content : 'Armenian'
    },
]


let activeClick = false;
let isPlay = false;
let bool = false;
let playlist = document.querySelector('.playlist');
let playorpause = document.querySelector('.playorpause');
let topBar = document.querySelector('.top-bar'); 
let audioPicture = document.querySelector('.audio-picture');
let categories = document.querySelector('.categories');
let next = document.querySelector('.next');
let prev = document.querySelector('.prev');
let undo = document.querySelector('.undo');
let redo = document.querySelector('.redo');
let volumeRange = document.querySelector('.volume-range');
let volumePrecent = document.querySelector('.volume-precent');
let durationRange = document.querySelector('.duration-range');
let audioCurrentTime = document.querySelector('.audio-currentTime');
let audioDuration = document.querySelector('.audio-duration');
let random = document.querySelector('.random');
let repeat = document.querySelector('.repeat');
let allAudio = document.querySelectorAll('.audio-player *');
let audioPlayer = document.querySelector('.audio-player'); 
let musicList = document.querySelector('.list');

let repeatClick = false;
let filterList = [];


function animate() {
  setTimeout(() => {
    allAudio.forEach((item, i) => {
      item.style.transition = '.5s';
      item.style.transform = 'translateY(0)';
      item.style.transitionDelay = i * .1 + 's';  
    });
    audioPlayer.style.background = 'white';
  }, 600);

}
animate();

categoryList.forEach((cat, i) => {
  let catItem = document.createElement('div');
  catItem.className = 'cat-item';
  catItem.style.background = `url(${cat.pic})`;
  let catName = document.createElement('h2');
  catName.innerText = cat.content;
  catItem.append(catName);
  categories.append(catItem);
  catItem.onclick = () => {
    filterList = music.filter(item => item.category === catName.innerText);
    playlist.innerHTML = '';
    list(filterList);
    bool = !bool;
    activeClick = true;
    index = 0;
    load(filterList[index]);
    pausing();
  }
})

let bool2;
musicList.onclick = function() { 
    this.style.scale = 0
    bool2 = !bool2;
    playlist.style.left = '0';
    categories.style.left = '0';
}

function list(arrayname) {
  arrayname.forEach((item, i) => {
    let musicItem = document.createElement('div');
    playlist.append(musicItem);
    musicItem.className = 'music-item';
    let musicImg = document.createElement('img');
    musicImg.src = item.picture;
    let musicName = document.createElement('h2');
    musicName.innerText = item.artist + ' - ' + item.song;
    let playicon = document.createElement('i');
    playicon.className = 'fa fa-play';
    musicItem.append(musicImg, musicName, playicon);
    musicItem.onclick = () => {
        if(bool2) {
            playlist.style.left = null;
            categories.style.left = null;
            musicList.style.scale = 1;
            bool2 = !bool2;
        }
        document.querySelectorAll('.music-item').forEach(it => {
            it.classList.remove('active-item');
        })
        document.querySelectorAll('.music-item i').forEach(icon => {
            icon.className = 'fa fa-play';
        })
        musicItem.classList.add('active-item');
        playicon.className = isPlay ? 'fa fa-pause' : 'fa fa-play';
        index = i;
        bool ? load(filterList[index]) : load(music[index]);
        isPlay ? playing() : pausing();
    }
});
}
list(music);
function playing() {
    isPlay = true;
    audio.play();
    playorpause.className = 'fa fa-pause';
}

function pausing() {
    isPlay = false;
    audio.pause();
    playorpause.className = 'fa fa-play';
}

playorpause.onclick = () => {
    activeClick ? load(filterList[index]) : load(music[index])
    !isPlay ? playing() : pausing();
    document.querySelectorAll('.music-item i')[index].className = isPlay ? 'fa fa-pause' : 'fa fa-play';
    document.querySelectorAll('.music-item')[index].classList.add('active-item');
}
let index = 0;
function load(x) {
    audio.src = x.mp3;
    topBar.children[0].innerText = x.artist;
    topBar.children[1].innerText = x.song;
    topBar.children[2].innerText = x.category;
    audioPicture.style.background = `url(${x.picture}) no-repeat center / cover`;
}

bool ? load(filterList[index]) : load(music[index]);
next.onclick = () => {
  index++;

  audioPlayer.style.backgorund = 'black';
  allAudio.forEach((item, i) => {
    item.style.transition = 'none';
    item.style.transform = 'translateY(-100vh)';
    item.style.transitionDelay = i * .1 + 's';
    animate()
  })

  if(activeClick) {
      index > filterList.length-1 ? index = 0 : '';
  }
  else {
    index > music.length - 1 ? index = 0 : '';
  }
  bool ? load(filterList[index]) : load(music[index]);
  isPlay ? playing() : pausing();
  document.querySelectorAll('.music-item').forEach(it => {
    it.classList.remove('active-item');
  })
  document.querySelectorAll('.music-item i').forEach(icon => {
      icon.className = 'fa fa-play';
  })
  document.querySelectorAll('.music-item')[index].classList.add('active-item')
  document.querySelectorAll('.music-item i')[index].className = 'fa fa-pause';

}

prev.onclick = () => {
  index--;
  if(activeClick) {
    index < 0 ? index = filterList.length - 1 : '';
  }
  else {
    index < 0 ? index = music.length - 1 : '';
  }
  bool ? load(filterList[index]) : load(music[index]);
  isPlay ? playing() : pausing();
  document.querySelectorAll('.music-item').forEach(it => {
    it.classList.remove('active-item');
  })
  document.querySelectorAll('.music-item i').forEach(icon => {
      icon.className = 'fa fa-play';
  })
  document.querySelectorAll('.music-item')[index].classList.add('active-item')
  document.querySelectorAll('.music-item i')[index].className = 'fa fa-pause';
}

undo.onclick = () => audio.currentTime -= 10;
redo.onclick = () => audio.currentTime += 10;

volumeRange.oninput = () => {
    audio.volume = volumeRange.value / 100;
    volumePrecent.innerText = volumeRange.value + '%';
    vol.className = audio.volume === 0 ? 'fa fa-volume-off' : 'fa fa-volume-up';
}

durationRange.oninput = () => audio.currentTime = audio.duration / 100 * durationRange.value;

audio.ontimeupdate = () => {
  if(audio.currentTime == 0) { 
    audio.currentTime = 0
  }
  else {
    durationRange.value = audio.currentTime * 100 / audio.duration;
    let durmin = Math.floor(audio.duration / 60);
    let dursec = Math.floor(audio.duration - durmin * 60);
    let curmin = Math.floor(audio.currentTime / 60);
    let cursec = Math.floor(audio.currentTime - curmin * 60);
    audioDuration.innerText = `${durmin < 10 ? '0' + durmin : durmin}:${dursec < 10 ? '0' + dursec : dursec}`;
    audioCurrentTime.innerText = `${curmin < 10 ? '0' + curmin : curmin}:${cursec < 10 ? '0' + cursec : cursec}`;


    if(audio.ended) {
        !repeatClick ? index++ : '';
        if(activeClick) {
            index > filterList.length-1 ? index = 0 : '';
        }
        else {
          index > music.length - 1 ? index = 0 : '';
        }
        bool ? load(filterList[index]) : load(music[index]);
        isPlay ? playing() : pausing();
        document.querySelectorAll('.music-item').forEach(it => {
          it.classList.remove('active-item');
        })
        document.querySelectorAll('.music-item i').forEach(icon => {
            icon.className = 'fa fa-play';
        })
        document.querySelectorAll('.music-item')[index].classList.add('active-item')
        document.querySelectorAll('.music-item i')[index].className = 'fa fa-pause';
        audio.currentTime = 0;
        playing();
    }
  }
}

repeat.onclick = () => {
  repeatClick = !repeatClick;
  repeat.style.color = repeatClick ? 'red' : 'white';
  if(audio.ended) {
    if(activeClick) {
      index > filterList.length-1 ? index = 0 : '';
    }
    else {
      index > music.length - 1 ? index = 0 : '';
    }
    bool ? load(filterList[index]) : load(music[index]);
    isPlay ? playing() : pausing();
    document.querySelectorAll('.music-item').forEach(it => {
      it.classList.remove('active-item');
    })
    document.querySelectorAll('.music-item i').forEach(icon => {
        icon.className = 'fa fa-play';
    })
    document.querySelectorAll('.music-item')[index].classList.add('active-item')
    document.querySelectorAll('.music-item i')[index].className = 'fa fa-pause';
    playing();
  }
}
window.onkeydown = e => {
  if(e.which == 32) {
    if(isPlay) {
      pausing()
      document.querySelectorAll('.music-item i')[index].className = 'fa fa-play';
      document.querySelectorAll('.music-item')[index].classList.add('active-item');
    }
    else {
      playing();
      document.querySelectorAll('.music-item i')[index].className = 'fa fa-pause';
      document.querySelectorAll('.music-item')[index].classList.add('active-item'); 
    }
  }
  e.which == 39 ? audio.currentTime += 10 : '';
  e.which == 37 ? audio.currentTime -= 10 : ''
}
random.onclick = () => {
    let rand = 0;
    if(bool) {
      rand = Math.round(Math.random() * (filterList.length - 1));
      index = rand;
      load(filterList[index]);
      document.querySelectorAll('.music-item').forEach(it => {
        it.classList.remove('active-item');
      })
      document.querySelectorAll('.music-item i').forEach(icon => {
          icon.className = 'fa fa-play';
      })
      document.querySelectorAll('.music-item')[index].classList.add('active-item')
      document.querySelectorAll('.music-item i')[index].className = 'fa fa-pause';
      playing();
    }
    else {
      rand = Math.round(Math.random() * (music.length - 1));
      index = rand;
      load(music[index]);
      document.querySelectorAll('.music-item').forEach(it => {
        it.classList.remove('active-item');
      })
      document.querySelectorAll('.music-item i').forEach(icon => {
          icon.className = 'fa fa-play';
      })
      document.querySelectorAll('.music-item')[index].classList.add('active-item')
      document.querySelectorAll('.music-item i')[index].className = 'fa fa-pause';
      playing();
    }
}

